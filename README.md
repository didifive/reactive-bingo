![Repository language count](https://img.shields.io/github/languages/count/didifive/reactive-bingo)
![Repository language count](https://img.shields.io/github/languages/code-size/didifive/reactive-bingo)
[![GitHub last commit](https://img.shields.io/github/last-commit/didifive/reactive-bingo?color=blue)](https://github.com/didifive/reactive-bingo/commits/master)
[![Made by Didi](https://img.shields.io/badge/made%20by-Didi-green)](https://www.linkedin.com/in/luis-carlos-zancanela/)
![Repository license](https://img.shields.io/github/license/didifive/reactive-bingo)

# Desafio do curso Spring WebFlux

Criar uma API de jogo de Bingo usando as seguintes tecnologias:

![technology Java](https://img.shields.io/static/v1?color=red&label=Technology&message=Java&style=for-the-badge&logo=data:image/png;base64,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)
![technology MongoDB](https://img.shields.io/static/v1?color=47A248&label=Technology&message=MongoDB&style=for-the-badge&logo=mongodb)
![technology Spring Webflux](https://img.shields.io/static/v1?color=6DB33F&label=Technology&message=Spring%20WebFlux&style=for-the-badge&logo=spring)
![technology Docker](https://img.shields.io/static/v1?color=blue&label=Technology&message=Docker&style=for-the-badge&logo=docker)

## Requisitos
 * Gerenciar as informa√ß√µes dos jogadores (CRUD) com um find on demand;
 * Gerar as cartelas de uma rodada com os n√∫meros aleat√≥rios, regras:
   * Todas as cartelas geradas devem ter quantidades iguais de n√∫meros;
   * A cartela deve ter 20 n√∫meros;
   * Uma cartela pode ter no m√°ximo 1/4 dos mesmos n√∫meros de uma outra cartela;
   * as cartelas da rodada s√≥ podem ser geradas antes de come√ßar o sorteio dos n√∫meros;
 * Possibilidade de vincular uma cartela ao jogador ( 1 jogador s√≥ pode ser vinculado √° uma cartela por rodada);
 * Guardar um hist√≥rico das rodadas com os n√∫meros sorteados, regras:
   * Cada rodada pode sortear n√∫meros de 0 at√© 99;
   * Guardar os n√∫meros sorteados;
   * Guardar as cartelas que pertencem a ela;
   * Guardar os jogadores que participaram;
 * Endpoint para sortear o pr√≥ximo n√∫mero da rodada (um n√∫mero n√£o pode ser sorteado 2x na mesma rodada);
 * Endpoint para buscar o √∫ltimo n√∫mero sorteado;
 * Cada vez que um n√∫mero √© sorteado deve-se verificar se alguma cartela j√° completou todos os n√∫meros, caso tenha completado a rodada deve ser encerrada (bloquear gera√ß√£o de novos n√∫meros) e um e-mail deve ser enviado ao vencedor da partida e os outros jogadores devem receber um e-mail mostrando como eles se sairam;
 * Endpoint para buscar todas as rodadas (find all) o find on demand fica como opcional;
 * Endpoint para buscar informa√ß√µes de uma partida pelo identificador 
 * Dockerizar a aplica√ß√£o (opcional);
 * Montar documenta√ß√£o dos endpoints (opcional);

## Requisitos de testes
 * Os testes devem contemplar controller, services e reposit√≥rios que n√£o s√£o interfaces

 ## Dicas
 Sugest√£o de endpoints:
 * Jogadores:
   * save (POST /players)
   * update (PUT /players/{id})
   * delete (DELETE /players/{id)
   * find by id (GET /players/{id})
   * find on demand (GET /players)
 * Rodada:
   * criar rodada (POST /rounds)
   * gerar n√∫mero (POST /rounds/{id}/generate-number)
   * buscar ultimo n√∫mero sorteado (GET /rounds/{id}/current-number)
   * gerar cartela (POST /rounds/{id}/bingo-card/{playerId})
   * buscar rodadas (GET /rounds)
   * buscar rodada pelo id (GET /rounds/{id})

# üíØ Reactive Bingo by Luis Zancanela

As informa√ß√µes acima s√£o para o desafio, abaixo estar√£o as informa√ß√µes do projeto conforme desenvolvido para cumprir o desafio lan√ßado.

## üß± Configura√ß√£o

O projeto foi feito utilizando:
* IDE IntelliJ IDEA Community Edition 2022.1.1.
* Iniciado com [Spring Initializr] com as configura√ß√µes e depend√™ncias:
  * Project: Gradle Project
  * Language: Java
  * Spring Boot 2.7.5
  * Packaging: Jar
  * Java 17
  * Dependencies:
    * Spring Data Reactive MongoDB
    * Embedded MongoDB Database (para teste)
    * Spring Reactive Web
    * Java Mail Sender
    * Validation
    * Lombok
    * Mapstruct
    * OpenApi
    * Thymeleaf

## üñå Visuais
Logotipo do projeto:  
![Reactive Bingo Logo](docs/logo.png?raw=true "Reactive Bingo Logo")  
Banner do Spring personalizado:  
![Spring Banner personalizado](docs/banner-springboot.PNG?raw=true "Spring Banner personalizado")  
Diagrama de Classes UML:  
![UML Class Diagram](docs/uml-diagram.drawio.png?raw=true "UML Class Diagram")  
OpenApi - Swagger:  
![OpenApi - Swagger](docs/swagger.png?raw=true "OpenApi - Swagger")  
Postman Collection:  
![Postman Collection](docs/postman-collection.png?raw=true "Postman Collection")  
Mail Catcher:  
![Mail Catcher](docs/email-mailcatcher.png?raw=true "Mail Catcher")  
E-mail para ganhador:  
![E-mail para ganhador](docs/email-ganhador.png?raw=true "E-mail para ganhador")  
![E-mail para ganhador rodap√©](docs/email-rodape.png?raw=true "E-mail para ganhador rodap√©")  
E-mail para perdedor:  
![E-mail para perdedor](docs/email-perdedor.png?raw=true "E-mail para ganhador")  

## üíæ Instala√ß√£o
Clonar ou fazer download deste reposit√≥rio.  
Possuir docker e docker compose instalados. Se n√£o possui, siga este tutorial de como [Instalar Docker CE no Linux Ubuntu]. Neste tutorial tem passo de como instalar o WSL para utilizar o Linux no Windows 10.

## üë®‚Äçüíª Uso
No terminal verifique se o servi√ßo do docker est√° rodando e utilize o comando:
```bash
docker compose -f docker-compose-dev.yml up
```
Ao executar o comando acima, o docker ir√° montar os containers com as imagens de Gradle, JDK17, MongoDB e MailCatcher.  
Ap√≥s a aplica√ß√£o terminar o in√≠cio, √© poss√≠vel acessar o Swagger pelo endere√ßo: <http://localhost:8080/reactive-bingo/swagger-ui.html>.  
Para conferir emails gerados e enviados pelo sistema, utilize o MailCatcher dispon√≠vel no endere√ßo: <http://localhost:1080>

## üì° Endpoints

üôã‚Äç‚ôÇ Players (Jogadores):  

| M√©todo | URL                                                 |
|--------|-----------------------------------------------------|
| POST   | <http://localhost:8080/reactive-bingo/players>      |
| GET    | <http://localhost:8080/reactive-bingo/players>      |
| GET    | <http://localhost:8080/reactive-bingo/players/{id}> |
| PUT    | <http://localhost:8080/reactive-bingo/players/{id}> |
| DELETE | <http://localhost:8080/reactive-bingo/players/{id}> |

üé∞ Rounds (Rodadas):

| M√©todo | URL                                                                          |
|--------|------------------------------------------------------------------------------|
| POST   | <http://localhost:8080/reactive-bingo/rounds>                                |
| GET    | <http://localhost:8080/reactive-bingo/rounds>                                |
| GET    | <http://localhost:8080/reactive-bingo/rounds/{id}>                           |
| POST   | <http://localhost:8080/reactive-bingo/rounds/{id}/cards/generate/{playerId}> |
| GET    | <http://localhost:8080/reactive-bingo/rounds/{id}/cards/get/{playerId}>      |
| POST   | <http://localhost:8080/reactive-bingo/rounds/{id}/draw-number>               |
| GET    | <http://localhost:8080/reactive-bingo/rounds/{id}/last-number>               |

---

‚ù§ Feito por [Luis Carlos Zancanela] üöÄ  
‚òé D√∫vida, sugest√£o ou problema √© s√≥ entrar em contato.

[Spring Initializr]: https://start.spring.io/
[Postman]: https://www.postman.com/
[Luis Carlos Zancanela]: https://www.linkedin.com/in/luis-carlos-zancanela/
[Instalar Docker CE no Linux Ubuntu]: https://luiscarlosdidi.notion.site/Instalar-Docker-CE-no-Linux-Ubuntu-1668006799f7484292cae106a9c8234c